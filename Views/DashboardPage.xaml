<Page x:Class="AuroraInvoice.Views.DashboardPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:local="clr-namespace:AuroraInvoice.Views"
      mc:Ignorable="d"
      d:DesignHeight="800" d:DesignWidth="1000"
      Title="Dashboard">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Margin="40,30">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Header -->
            <StackPanel Grid.Row="0" Margin="0,0,0,30">
                <TextBlock Text="Dashboard"
                          Style="{StaticResource HeaderText}"/>
                <TextBlock Style="{StaticResource SecondaryText}">
                    <Run Text="Welcome back! Here's an overview of your business finances."/>
                </TextBlock>
            </StackPanel>

            <!-- Metrics Cards -->
            <Grid Grid.Row="1" Margin="0,0,0,30">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Total Income Card -->
                <Border Grid.Column="0" Style="{StaticResource Card}" Margin="0,0,15,0">
                    <StackPanel>
                        <TextBlock Text="Total Income"
                                  Style="{StaticResource SecondaryText}"
                                  Margin="0,0,0,8"/>
                        <TextBlock Text="{Binding Metrics.TotalIncome, StringFormat=C}"
                                  FontSize="32"
                                  FontWeight="Bold"
                                  Foreground="{StaticResource SuccessBrush}"/>
                        <TextBlock Text="This month"
                                  Style="{StaticResource SecondaryText}"
                                  FontSize="12"
                                  Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Total Expenses Card -->
                <Border Grid.Column="1" Style="{StaticResource Card}" Margin="0,0,15,0">
                    <StackPanel>
                        <TextBlock Text="Total Expenses"
                                  Style="{StaticResource SecondaryText}"
                                  Margin="0,0,0,8"/>
                        <TextBlock Text="{Binding Metrics.TotalExpenses, StringFormat=C}"
                                  FontSize="32"
                                  FontWeight="Bold"
                                  Foreground="{StaticResource DangerBrush}"/>
                        <TextBlock Text="This month"
                                  Style="{StaticResource SecondaryText}"
                                  FontSize="12"
                                  Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Net GST Card -->
                <Border Grid.Column="2" Style="{StaticResource Card}" Margin="0,0,15,0">
                    <StackPanel>
                        <TextBlock Text="Net GST"
                                  Style="{StaticResource SecondaryText}"
                                  Margin="0,0,0,8"/>
                        <TextBlock Text="{Binding Metrics.NetGst, StringFormat=C}"
                                  FontSize="32"
                                  FontWeight="Bold"
                                  Foreground="{StaticResource PrimaryBrush}"/>
                        <TextBlock Text="Payable/Refundable"
                                  Style="{StaticResource SecondaryText}"
                                  FontSize="12"
                                  Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Pending Invoices Card -->
                <Border Grid.Column="3" Style="{StaticResource Card}">
                    <StackPanel>
                        <TextBlock Text="Pending Invoices"
                                  Style="{StaticResource SecondaryText}"
                                  Margin="0,0,0,8"/>
                        <TextBlock Text="{Binding Metrics.PendingInvoices}"
                                  FontSize="32"
                                  FontWeight="Bold"
                                  Foreground="{StaticResource WarningBrush}"/>
                        <TextBlock Text="Awaiting payment"
                                  Style="{StaticResource SecondaryText}"
                                  FontSize="12"
                                  Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>
            </Grid>

            <!-- Recent Activity Section -->
            <Grid Grid.Row="2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*"/>
                    <ColumnDefinition Width="15"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Recent Invoices -->
                <Border Grid.Column="0" Style="{StaticResource Card}">
                    <StackPanel>
                        <TextBlock Text="Recent Invoices"
                                  Style="{StaticResource SubheaderText}"/>

                        <DataGrid ItemsSource="{Binding RecentInvoices}"
                                 Style="{StaticResource ModernDataGrid}"
                                 Height="300">
                            <DataGrid.Columns>
                                <DataGridTextColumn Header="Invoice #" Binding="{Binding InvoiceNumber}" Width="Auto"/>
                                <DataGridTextColumn Header="Customer" Binding="{Binding Customer.Name}" Width="*"/>
                                <DataGridTextColumn Header="Date" Binding="{Binding InvoiceDate, StringFormat=dd/MM/yyyy}" Width="Auto"/>
                                <DataGridTextColumn Header="Amount" Binding="{Binding TotalAmount, StringFormat=C}" Width="Auto"/>
                                <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="Auto"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </StackPanel>
                </Border>

                <!-- Quick Actions -->
                <Border Grid.Column="2" Style="{StaticResource Card}">
                    <StackPanel>
                        <TextBlock Text="Quick Actions"
                                  Style="{StaticResource SubheaderText}"/>

                        <Button Content="New Invoice"
                               Style="{StaticResource ModernButton}"
                               Margin="0,0,0,12"/>

                        <Button Content="New Customer"
                               Style="{StaticResource SecondaryButton}"
                               Margin="0,0,0,12"/>

                        <Button Content="Add Expense"
                               Style="{StaticResource SecondaryButton}"
                               Margin="0,0,0,12"/>

                        <Separator Margin="0,12"/>

                        <Button Content="View Reports"
                               Style="{StaticResource SecondaryButton}"
                               Margin="0,12,0,12"/>

                        <Button Content="Backup Data"
                               Style="{StaticResource SecondaryButton}"/>
                    </StackPanel>
                </Border>
            </Grid>
        </Grid>
    </ScrollViewer>
</Page>